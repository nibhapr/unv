import{A as AstroError,I as InvalidComponentArgs,a as AstroGlobUsedOutside,b as AstroGlobNoMatch,M as MissingMediaQueryDirective,N as NoMatchingImport,c as NoMatchingRenderer,d as NoClientOnlyHint,e as NoClientEntrypoint}from"./assets-service.f-hBXl1N.js";import"kleur/colors";import{clsx}from"clsx";import{escape}from"html-escaper";import{encodeHexUpperCase,encodeBase64,decodeBase64}from"@oslojs/encoding";import"cssesc";function validateArgs(e){return 3===e.length&&!(!e[0]||"object"!=typeof e[0])}function baseCreateComponent(e,t,r){const n=t?.split("/").pop()?.replace(".astro","")??"",s=(...t)=>{if(!validateArgs(t))throw new AstroError({...InvalidComponentArgs,message:InvalidComponentArgs.message(n)});return e(...t)};return Object.defineProperty(s,"name",{value:n,writable:!1}),s.isAstroComponentFactory=!0,s.moduleId=t,s.propagation=r,s}function createComponentWithOptions(e){return baseCreateComponent(e.factory,e.moduleId,e.propagation)}function createComponent(e,t,r){return"function"==typeof e?baseCreateComponent(e,t,r):createComponentWithOptions(e)}const ASTRO_VERSION="4.16.18",NOOP_MIDDLEWARE_HEADER="X-Astro-Noop";function createAstroGlobFn(){return e=>{if("string"==typeof e)throw new AstroError({...AstroGlobUsedOutside,message:AstroGlobUsedOutside.message(JSON.stringify(e))});let t=[...Object.values(e)];if(0===t.length)throw new AstroError({...AstroGlobNoMatch,message:AstroGlobNoMatch.message(JSON.stringify(e))});return Promise.all(t.map((e=>e())))}}function createAstro(e){return{site:new URL(e),generator:"Astro v4.16.18",glob:createAstroGlobFn()}}function isPromise(e){return!!e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}async function*streamAsyncIterator(e){const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}const escapeHTML=escape;class HTMLBytes extends Uint8Array{}Object.defineProperty(HTMLBytes.prototype,Symbol.toStringTag,{get:()=>"HTMLBytes"});class HTMLString extends String{get[Symbol.toStringTag](){return"HTMLString"}}const markHTMLString=e=>e instanceof HTMLString?e:"string"==typeof e?new HTMLString(e):e;function isHTMLString(e){return"[object HTMLString]"===Object.prototype.toString.call(e)}function markHTMLBytes(e){return new HTMLBytes(e)}function hasGetReader(e){return"function"==typeof e.getReader}async function*unescapeChunksAsync(e){if(hasGetReader(e))for await(const t of streamAsyncIterator(e))yield unescapeHTML(t);else for await(const t of e)yield unescapeHTML(t)}function*unescapeChunks(e){for(const t of e)yield unescapeHTML(t)}function unescapeHTML(e){if(e&&"object"==typeof e){if(e instanceof Uint8Array)return markHTMLBytes(e);if(e instanceof Response&&e.body){return unescapeChunksAsync(e.body)}if("function"==typeof e.then)return Promise.resolve(e).then((e=>unescapeHTML(e)));if(e[Symbol.for("astro:slot-string")])return e;if(Symbol.iterator in e)return unescapeChunks(e);if(Symbol.asyncIterator in e||hasGetReader(e))return unescapeChunksAsync(e)}return markHTMLString(e)}const RenderInstructionSymbol=Symbol.for("astro:render");function createRenderInstruction(e){return Object.defineProperty(e,RenderInstructionSymbol,{value:!0})}function isRenderInstruction(e){return e&&"object"==typeof e&&e[RenderInstructionSymbol]}const PROP_TYPE={Value:0,JSON:1,RegExp:2,Date:3,Map:4,Set:5,BigInt:6,URL:7,Uint8Array:8,Uint16Array:9,Uint32Array:10,Infinity:11};function serializeArray(e,t={},r=new WeakSet){if(r.has(e))throw new Error(`Cyclic reference detected while serializing props for <${t.displayName} client:${t.hydrate}>!\n\nCyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(e);const n=e.map((e=>convertToSerializedForm(e,t,r)));return r.delete(e),n}function serializeObject(e,t={},r=new WeakSet){if(r.has(e))throw new Error(`Cyclic reference detected while serializing props for <${t.displayName} client:${t.hydrate}>!\n\nCyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(e);const n=Object.fromEntries(Object.entries(e).map((([e,n])=>[e,convertToSerializedForm(n,t,r)])));return r.delete(e),n}function convertToSerializedForm(e,t={},r=new WeakSet){switch(Object.prototype.toString.call(e)){case"[object Date]":return[PROP_TYPE.Date,e.toISOString()];case"[object RegExp]":return[PROP_TYPE.RegExp,e.source];case"[object Map]":return[PROP_TYPE.Map,serializeArray(Array.from(e),t,r)];case"[object Set]":return[PROP_TYPE.Set,serializeArray(Array.from(e),t,r)];case"[object BigInt]":return[PROP_TYPE.BigInt,e.toString()];case"[object URL]":return[PROP_TYPE.URL,e.toString()];case"[object Array]":return[PROP_TYPE.JSON,serializeArray(e,t,r)];case"[object Uint8Array]":return[PROP_TYPE.Uint8Array,Array.from(e)];case"[object Uint16Array]":return[PROP_TYPE.Uint16Array,Array.from(e)];case"[object Uint32Array]":return[PROP_TYPE.Uint32Array,Array.from(e)];default:return null!==e&&"object"==typeof e?[PROP_TYPE.Value,serializeObject(e,t,r)]:e===1/0?[PROP_TYPE.Infinity,1]:e===-1/0?[PROP_TYPE.Infinity,-1]:void 0===e?[PROP_TYPE.Value]:[PROP_TYPE.Value,e]}}function serializeProps(e,t){return JSON.stringify(serializeObject(e,t))}const transitionDirectivesToCopyOnIsland=Object.freeze(["data-astro-transition-scope","data-astro-transition-persist","data-astro-transition-persist-props"]);function extractDirectives(e,t){let r={isPage:!1,hydration:null,props:{},propsWithoutTransitionAttributes:{}};for(const[n,s]of Object.entries(e))if(n.startsWith("server:")&&"server:root"===n&&(r.isPage=!0),n.startsWith("client:"))switch(r.hydration||(r.hydration={directive:"",value:"",componentUrl:"",componentExport:{value:""}}),n){case"client:component-path":r.hydration.componentUrl=s;break;case"client:component-export":r.hydration.componentExport.value=s;break;case"client:component-hydration":case"client:display-name":break;default:if(r.hydration.directive=n.split(":")[1],r.hydration.value=s,!t.has(r.hydration.directive)){const e=Array.from(t.keys()).map((e=>`client:${e}`)).join(", ");throw new Error(`Error: invalid hydration directive "${n}". Supported hydration methods: ${e}`)}if("media"===r.hydration.directive&&"string"!=typeof r.hydration.value)throw new AstroError(MissingMediaQueryDirective)}else r.props[n]=s,transitionDirectivesToCopyOnIsland.includes(n)||(r.propsWithoutTransitionAttributes[n]=s);for(const t of Object.getOwnPropertySymbols(e))r.props[t]=e[t],r.propsWithoutTransitionAttributes[t]=e[t];return r}async function generateHydrateScript(e,t){const{renderer:r,result:n,astroId:s,props:o,attrs:i}=e,{hydrate:a,componentUrl:c,componentExport:l}=t;if(!l.value)throw new AstroError({...NoMatchingImport,message:NoMatchingImport.message(t.displayName)});const d={children:"",props:{uid:s}};if(i)for(const[e,t]of Object.entries(i))d.props[e]=escapeHTML(t);d.props["component-url"]=await n.resolve(decodeURI(c)),r.clientEntrypoint&&(d.props["component-export"]=l.value,d.props["renderer-url"]=await n.resolve(decodeURI(r.clientEntrypoint)),d.props.props=escapeHTML(serializeProps(o,t))),d.props.ssr="",d.props.client=a;let u=await n.resolve("astro:scripts/before-hydration.js");return u.length&&(d.props["before-hydration-url"]=u),d.props.opts=escapeHTML(JSON.stringify({name:t.displayName,value:t.hydrateArgs||""})),transitionDirectivesToCopyOnIsland.forEach((e=>{void 0!==o[e]&&(d.props[e]=o[e])})),d}const dictionary="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY",binary=61;function bitwise(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t}function shorthash(e){let t,r="",n=bitwise(e);const s=n<0?"Z":"";for(n=Math.abs(n);n>=61;)t=n%61,n=Math.floor(n/61),r=dictionary[t]+r;return n>0&&(r=dictionary[n]+r),s+r}function isAstroComponentFactory(e){return null!=e&&!0===e.isAstroComponentFactory}function isAPropagatingComponent(e,t){let r=t.propagation||"none";return t.moduleId&&e.componentMetadata.has(t.moduleId)&&"none"===r&&(r=e.componentMetadata.get(t.moduleId).propagation),"in-tree"===r||"self"===r}const headAndContentSym=Symbol.for("astro.headAndContent");function isHeadAndContent(e){return"object"==typeof e&&null!==e&&!!e[headAndContentSym]}function createHeadAndContent(e,t){return{[headAndContentSym]:!0,head:e,content:t}}var astro_island_prebuilt_dev_default='(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var l=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>y(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[h,e]=t;return h in i?i[h](e):void 0},a=t=>t.map(o),y=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([h,e])=>[h,o(e)]));class f extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},p=this.querySelectorAll("template[data-astro-template]");for(let r of p){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let u;try{u=this.hasAttribute("props")?y(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let d,m=this.hydrator(this);d=performance.now(),await m(this.Component,u,n,{client:this.getAttribute("client")}),d&&this.setAttribute("client-render-time",(performance.now()-d).toString()),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[p,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=p[d];else{this.Component=p;for(let m of d.split("."))this.Component=this.Component[m]}return this.hydrator=u,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}l(f,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",f)}})();',astro_island_prebuilt_default='(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();';const ISLAND_STYLES="<style>astro-island,astro-slot,astro-static-slot{display:contents}</style>";function determineIfNeedsHydrationScript(e){return!e._metadata.hasHydrationScript&&(e._metadata.hasHydrationScript=!0)}function determinesIfNeedsDirectiveScript(e,t){return!e._metadata.hasDirectives.has(t)&&(e._metadata.hasDirectives.add(t),!0)}function getDirectiveScriptText(e,t){const r=e.clientDirectives.get(t);if(!r)throw new Error(`Unknown directive: ${t}`);return r}function getPrescripts(e,t,r){switch(t){case"both":return`${ISLAND_STYLES}<script>${getDirectiveScriptText(e,r)};${"development"===process.env.NODE_ENV?astro_island_prebuilt_dev_default:astro_island_prebuilt_default}<\/script>`;case"directive":return`<script>${getDirectiveScriptText(e,r)}<\/script>`}return""}const voidElementNames=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,htmlBooleanAttributes=/^(?:allowfullscreen|async|autofocus|autoplay|checked|controls|default|defer|disabled|disablepictureinpicture|disableremoteplayback|formnovalidate|hidden|loop|nomodule|novalidate|open|playsinline|readonly|required|reversed|scoped|seamless|selected|itemscope)$/i,htmlEnumAttributes=/^(?:contenteditable|draggable|spellcheck|value)$/i,svgEnumAttributes=/^(?:autoReverse|externalResourcesRequired|focusable|preserveAlpha)$/i,AMPERSAND_REGEX=/&/g,DOUBLE_QUOTE_REGEX=/"/g,STATIC_DIRECTIVES=new Set(["set:html","set:text"]),toIdent=e=>e.trim().replace(/(?!^)\b\w|\s+|\W+/g,((e,t)=>/\W/.test(e)?"":0===t?e:e.toUpperCase())),toAttributeString=(e,t=!0)=>t?String(e).replace(AMPERSAND_REGEX,"&#38;").replace(DOUBLE_QUOTE_REGEX,"&#34;"):e,kebab=e=>e.toLowerCase()===e?e:e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),toStyleString=e=>Object.entries(e).filter((([e,t])=>"string"==typeof t&&t.trim()||"number"==typeof t)).map((([e,t])=>"-"!==e[0]&&"-"!==e[1]?`${kebab(e)}:${t}`:`${e}:${t}`)).join(";");function defineScriptVars(e){let t="";for(const[r,n]of Object.entries(e))t+=`const ${toIdent(r)} = ${JSON.stringify(n)?.replace(/<\/script>/g,"\\x3C/script>")};\n`;return markHTMLString(t)}function formatList(e){return 1===e.length?e[0]:`${e.slice(0,-1).join(", ")} or ${e[e.length-1]}`}function addAttribute(e,t,r=!0){if(null==e)return"";if(!1===e)return htmlEnumAttributes.test(t)||svgEnumAttributes.test(t)?markHTMLString(` ${t}="false"`):"";if(STATIC_DIRECTIVES.has(t))return console.warn(`[astro] The "${t}" directive cannot be applied dynamically at runtime. It will not be rendered as an attribute.\n\nMake sure to use the static attribute syntax (\`${t}={value}\`) instead of the dynamic spread syntax (\`{...{ "${t}": value }}\`).`),"";if("class:list"===t){const n=toAttributeString(clsx(e),r);return""===n?"":markHTMLString(` ${t.slice(0,-5)}="${n}"`)}if("style"===t&&!(e instanceof HTMLString)){if(Array.isArray(e)&&2===e.length)return markHTMLString(` ${t}="${toAttributeString(`${toStyleString(e[0])};${e[1]}`,r)}"`);if("object"==typeof e)return markHTMLString(` ${t}="${toAttributeString(toStyleString(e),r)}"`)}return"className"===t?markHTMLString(` class="${toAttributeString(e,r)}"`):"string"==typeof e&&e.includes("&")&&isHttpUrl(e)?markHTMLString(` ${t}="${toAttributeString(e,!1)}"`):!0===e&&(t.startsWith("data-")||htmlBooleanAttributes.test(t))?markHTMLString(` ${t}`):markHTMLString(` ${t}="${toAttributeString(e,r)}"`)}function internalSpreadAttributes(e,t=!0){let r="";for(const[n,s]of Object.entries(e))r+=addAttribute(s,n,t);return markHTMLString(r)}function renderElement(e,{props:t,children:r=""},n=!0){const{lang:s,"data-astro-id":o,"define:vars":i,...a}=t;return i&&("style"===e&&(delete a["is:global"],delete a["is:scoped"]),"script"===e&&(delete a.hoist,r=defineScriptVars(i)+"\n"+r)),null!=r&&""!=r||!voidElementNames.test(e)?`<${e}${internalSpreadAttributes(a,n)}>${r}</${e}>`:`<${e}${internalSpreadAttributes(a,n)}>`}const noop=()=>{};class BufferedRenderer{chunks=[];renderPromise;destination;constructor(e){this.renderPromise=e(this),Promise.resolve(this.renderPromise).catch(noop)}write(e){this.destination?this.destination.write(e):this.chunks.push(e)}async renderToFinalDestination(e){for(const t of this.chunks)e.write(t);this.destination=e,await this.renderPromise}}function renderToBufferDestination(e){return new BufferedRenderer(e)}"undefined"!=typeof process&&Object.prototype.toString.call(process);const VALID_PROTOCOLS=["http:","https:"];function isHttpUrl(e){try{const t=new URL(e);return VALID_PROTOCOLS.includes(t.protocol)}catch{return!1}}const uniqueElements=(e,t,r)=>{const n=JSON.stringify(e.props),s=e.children;return t===r.findIndex((e=>JSON.stringify(e.props)===n&&e.children==s))};function renderAllHeadContent(e){e._metadata.hasRenderedHead=!0;const t=Array.from(e.styles).filter(uniqueElements).map((e=>"stylesheet"===e.props.rel?renderElement("link",e):renderElement("style",e)));e.styles.clear();const r=Array.from(e.scripts).filter(uniqueElements).map((e=>renderElement("script",e,!1))),n=Array.from(e.links).filter(uniqueElements).map((e=>renderElement("link",e,!1)));let s=t.join("\n")+n.join("\n")+r.join("\n");if(e._metadata.extraHead.length>0)for(const t of e._metadata.extraHead)s+=t;return markHTMLString(s)}function renderHead(){return createRenderInstruction({type:"head"})}function maybeRenderHead(){return createRenderInstruction({type:"maybe-head"})}const renderTemplateResultSym=Symbol.for("astro.renderTemplateResult");class RenderTemplateResult{[renderTemplateResultSym]=!0;htmlParts;expressions;error;constructor(e,t){this.htmlParts=e,this.error=void 0,this.expressions=t.map((e=>isPromise(e)?Promise.resolve(e).catch((e=>{if(!this.error)throw this.error=e,e})):e))}async render(e){const t=this.expressions.map((e=>renderToBufferDestination((t=>{if(e||0===e)return renderChild(t,e)}))));for(let r=0;r<this.htmlParts.length;r++){const n=this.htmlParts[r],s=t[r];e.write(markHTMLString(n)),s&&await s.renderToFinalDestination(e)}}}function isRenderTemplateResult(e){return"object"==typeof e&&null!==e&&!!e[renderTemplateResultSym]}function renderTemplate(e,...t){return new RenderTemplateResult(e,t)}const slotString=Symbol.for("astro:slot-string");class SlotString extends HTMLString{instructions;[slotString];constructor(e,t){super(e),this.instructions=t,this[slotString]=!0}}function isSlotString(e){return!!e[slotString]}function renderSlot(e,t,r){return!t&&r?renderSlot(e,r):{async render(r){await renderChild(r,"function"==typeof t?t(e):t)}}}async function renderSlotToString(e,t,r){let n="",s=null;const o={write(t){if(t instanceof SlotString)n+=t,t.instructions&&(s??=[],s.push(...t.instructions));else{if(t instanceof Response)return;"object"==typeof t&&"type"in t&&"string"==typeof t.type?(null===s&&(s=[]),s.push(t)):n+=chunkToString(e,t)}}},i=renderSlot(e,t,r);return await i.render(o),markHTMLString(new SlotString(n,s))}async function renderSlots(e,t={}){let r=null,n={};return t&&await Promise.all(Object.entries(t).map((([t,s])=>renderSlotToString(e,s).then((e=>{e.instructions&&(null===r&&(r=[]),r.push(...e.instructions)),n[t]=e}))))),{slotInstructions:r,children:n}}const Fragment=Symbol.for("astro:fragment"),Renderer=Symbol.for("astro:renderer");new TextEncoder;const decoder=new TextDecoder;function stringifyChunk(e,t){if(isRenderInstruction(t)){const r=t;switch(r.type){case"directive":{const{hydration:t}=r;let n=t&&determineIfNeedsHydrationScript(e),s=t&&determinesIfNeedsDirectiveScript(e,t.directive),o=n?"both":s?"directive":null;if(o){let r=getPrescripts(e,o,t.directive);return markHTMLString(r)}return""}case"head":return e._metadata.hasRenderedHead||e.partial?"":renderAllHeadContent(e);case"maybe-head":return e._metadata.hasRenderedHead||e._metadata.headInTree||e.partial?"":renderAllHeadContent(e);case"renderer-hydration-script":{const{rendererSpecificHydrationScripts:t}=e._metadata,{rendererName:n}=r;return t.has(n)?"":(t.add(n),r.render())}default:throw new Error(`Unknown chunk type: ${t.type}`)}}else{if(t instanceof Response)return"";if(isSlotString(t)){let r="";const n=t;if(n.instructions)for(const t of n.instructions)r+=stringifyChunk(e,t);return r+=t.toString(),r}}return t.toString()}function chunkToString(e,t){return ArrayBuffer.isView(t)?decoder.decode(t):stringifyChunk(e,t)}function isRenderInstance(e){return!!e&&"object"==typeof e&&"render"in e&&"function"==typeof e.render}async function renderChild(e,t){if(isPromise(t)&&(t=await t),t instanceof SlotString)e.write(t);else if(isHTMLString(t))e.write(t);else if(Array.isArray(t)){const r=t.map((e=>renderToBufferDestination((t=>renderChild(t,e)))));for(const t of r)t&&await t.renderToFinalDestination(e)}else if("function"==typeof t)await renderChild(e,t());else if("string"==typeof t)e.write(markHTMLString(escapeHTML(t)));else if(t||0===t)if(isRenderInstance(t))await t.render(e);else if(isRenderTemplateResult(t))await t.render(e);else if(isAstroComponentInstance(t))await t.render(e);else if(ArrayBuffer.isView(t))e.write(t);else if("object"==typeof t&&(Symbol.asyncIterator in t||Symbol.iterator in t))for await(const r of t)await renderChild(e,r);else e.write(t);else;}const astroComponentInstanceSym=Symbol.for("astro.componentInstance");class AstroComponentInstance{[astroComponentInstanceSym]=!0;result;props;slotValues;factory;returnValue;constructor(e,t,r,n){this.result=e,this.props=t,this.factory=n,this.slotValues={};for(const t in r){let n=!1,s=r[t](e);this.slotValues[t]=()=>n?r[t](e):(n=!0,s)}}async init(e){return void 0!==this.returnValue||(this.returnValue=this.factory(e,this.props,this.slotValues),isPromise(this.returnValue)&&this.returnValue.then((e=>{this.returnValue=e})).catch((()=>{}))),this.returnValue}async render(e){const t=await this.init(this.result);isHeadAndContent(t)?await t.content.render(e):await renderChild(e,t)}}function validateComponentProps(e,t){if(null!=e)for(const r of Object.keys(e))r.startsWith("client:")&&console.warn(`You are attempting to render <${t} ${r} />, but ${t} is an Astro component. Astro components do not render in the client and should not have a hydration directive. Please use a framework component for client rendering.`)}function createAstroComponentInstance(e,t,r,n,s={}){validateComponentProps(n,t);const o=new AstroComponentInstance(e,n,s,r);return isAPropagatingComponent(e,r)&&e._metadata.propagators.add(o),o}function isAstroComponentInstance(e){return"object"==typeof e&&null!==e&&!!e[astroComponentInstanceSym]}function componentIsHTMLElement(e){return"undefined"!=typeof HTMLElement&&HTMLElement.isPrototypeOf(e)}async function renderHTMLElement(e,t,r,n){const s=getHTMLElementName(t);let o="";for(const e in r)o+=` ${e}="${toAttributeString(await r[e])}"`;return markHTMLString(`<${s}${o}>${await renderSlotToString(e,n?.default)}</${s}>`)}function getHTMLElementName(e){const t=customElements.getName(e);if(t)return t;return e.name.replace(/^HTML|Element$/g,"").replace(/[A-Z]/g,"-$&").toLowerCase().replace(/^-/,"html-")}const ALGORITHM="AES-GCM";async function decodeKey(e){const t=decodeBase64(e);return crypto.subtle.importKey("raw",t,"AES-GCM",!0,["encrypt","decrypt"])}const encoder=new TextEncoder;new TextDecoder;const IV_LENGTH=24;async function encryptString(e,t){const r=crypto.getRandomValues(new Uint8Array(12)),n=encoder.encode(t),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,n);return encodeHexUpperCase(r)+encodeBase64(new Uint8Array(s))}const internalProps=new Set(["server:component-path","server:component-export","server:component-directive","server:defer"]);function containsServerDirective(e){return"server:component-directive"in e}function safeJsonStringify(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/\//g,"\\u002f")}function renderServerIsland(e,t,r,n){return{async render(t){const s=r["server:component-path"],o=r["server:component-export"],i=e.serverIslandNameMap.get(s);if(!i)throw new Error("Could not find server component name");for(const e of Object.keys(r))internalProps.has(e)&&delete r[e];t.write("\x3c!--[if astro]>server-island-start<![endif]--\x3e");const a={};for(const r in n)if("fallback"!==r){const t=await renderSlotToString(e,n[r]);a[r]=t.toString()}else await renderChild(t,n.fallback(e));const c=await e.key,l=await encryptString(c,JSON.stringify(r)),d=crypto.randomUUID(),u=e.base.endsWith("/")?"":"/",p=`${e.base}${u}_server-islands/${i}${"always"===e.trailingSlash?"/":""}`;t.write(`<script async type="module" data-island-id="${d}">\nlet componentId = ${safeJsonStringify(i)};\nlet componentExport = ${safeJsonStringify(o)};\nlet script = document.querySelector('script[data-island-id="${d}"]');\nlet data = {\n\tcomponentExport,\n\tencryptedProps: ${safeJsonStringify(l)},\n\tslots: ${safeJsonStringify(a)},\n};\n\nlet response = await fetch('${p}', {\n\tmethod: 'POST',\n\tbody: JSON.stringify(data),\n});\nif (script) {\n\tif(response.status === 200 && response.headers.get('content-type') === 'text/html') {\n\tlet html = await response.text();\n\n\t// Swap!\n\twhile(script.previousSibling &&\n\t\tscript.previousSibling.nodeType !== 8 &&\n\t\tscript.previousSibling.data !== '[if astro]>server-island-start<![endif]') {\n\t\tscript.previousSibling.remove();\n\t}\n\tscript.previousSibling?.remove();\n\n\tlet frag = document.createRange().createContextualFragment(html);\n\tscript.before(frag);\n}\nscript.remove();\n}\n<\/script>`)}}}const rendererAliases=new Map([["solid","solid-js"]]),clientOnlyValues=new Set(["solid-js","react","preact","vue","svelte","lit"]);function guessRenderers(e){const t=e?.split(".").pop();switch(t){case"svelte":return["@astrojs/svelte"];case"vue":return["@astrojs/vue"];case"jsx":case"tsx":return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue (jsx)"];default:return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue","@astrojs/svelte","@astrojs/lit"]}}function isFragmentComponent(e){return e===Fragment}function isHTMLComponent(e){return e&&!0===e["astro:html"]}const ASTRO_SLOT_EXP=/<\/?astro-slot\b[^>]*>/g,ASTRO_STATIC_SLOT_EXP=/<\/?astro-static-slot\b[^>]*>/g;function removeStaticAstroSlot(e,t=!0){const r=t?ASTRO_STATIC_SLOT_EXP:ASTRO_SLOT_EXP;return e.replace(r,"")}async function renderFrameworkComponent(e,t,r,n,s={}){if(!r&&"client:only"in n==!1)throw new Error(`Unable to render ${t} because it is ${r}!\nDid you forget to import the component or is it possible there is a typo?`);const{renderers:o,clientDirectives:i}=e,a={astroStaticSlot:!0,displayName:t},{hydration:c,isPage:l,props:d,propsWithoutTransitionAttributes:u}=extractDirectives(n,i);let p,m="";c&&(a.hydrate=c.directive,a.hydrateArgs=c.value,a.componentExport=c.componentExport,a.componentUrl=c.componentUrl);const h=guessRenderers(a.componentUrl),f=o.filter((e=>"astro:jsx"!==e.name)),{children:y,slotInstructions:g}=await renderSlots(e,s);let b,S;if("only"!==a.hydrate){let t=!1;try{t=r&&r[Renderer]}catch{}if(t){const e=r[Renderer];b=o.find((({name:t})=>t===e))}if(!b){let t;for(const n of o)try{if(await n.ssr.check.call({result:e},r,d,y)){b=n;break}}catch(e){t??=e}if(!b&&t)throw t}if(!b&&"function"==typeof HTMLElement&&componentIsHTMLElement(r)){const t=await renderHTMLElement(e,r,n,s);return{render(e){e.write(t)}}}}else{if(a.hydrateArgs){const e=rendererAliases.has(a.hydrateArgs)?rendererAliases.get(a.hydrateArgs):a.hydrateArgs;clientOnlyValues.has(e)&&(b=o.find((({name:t})=>t===`@astrojs/${e}`||t===e)))}if(b||1!==f.length||(b=f[0]),!b){const e=a.componentUrl?.split(".").pop();b=o.find((({name:t})=>t===`@astrojs/${e}`||t===e))}}if(b)if("only"===a.hydrate){const t=rendererAliases.has(a.hydrateArgs)?rendererAliases.get(a.hydrateArgs):a.hydrateArgs;clientOnlyValues.has(t)||console.warn(`The client:only directive for ${a.displayName} is not recognized. The renderer ${b.name} will be used. If you intended to use a different renderer, please provide a valid client:only directive.`),m=await renderSlotToString(e,s?.fallback)}else{const t=performance.now();({html:m,attrs:p}=await b.ssr.renderToStaticMarkup.call({result:e},r,u,y,a)),"development"===process.env.NODE_ENV&&(S=performance.now()-t)}else{if("only"===a.hydrate){const e=rendererAliases.has(a.hydrateArgs)?rendererAliases.get(a.hydrateArgs):a.hydrateArgs;if(clientOnlyValues.has(e)){const e=f.length>1;throw new AstroError({...NoMatchingRenderer,message:NoMatchingRenderer.message(a.displayName,a?.componentUrl?.split(".").pop(),e,f.length),hint:NoMatchingRenderer.hint(formatList(h.map((e=>"`"+e+"`"))))})}throw new AstroError({...NoClientOnlyHint,message:NoClientOnlyHint.message(a.displayName),hint:NoClientOnlyHint.hint(h.map((e=>e.replace("@astrojs/",""))).join("|"))})}if("string"!=typeof r){const t=f.filter((e=>h.includes(e.name))),n=f.length>1;if(0===t.length)throw new AstroError({...NoMatchingRenderer,message:NoMatchingRenderer.message(a.displayName,a?.componentUrl?.split(".").pop(),n,f.length),hint:NoMatchingRenderer.hint(formatList(h.map((e=>"`"+e+"`"))))});if(1!==t.length)throw new Error(`Unable to render ${a.displayName}!\n\nThis component likely uses ${formatList(h)},\nbut Astro encountered an error during server-side rendering.\n\nPlease ensure that ${a.displayName}:\n1. Does not unconditionally access browser-specific globals like \`window\` or \`document\`.\n   If this is unavoidable, use the \`client:only\` hydration directive.\n2. Does not conditionally return \`null\` or \`undefined\` when rendered on the server.\n\nIf you're still stuck, please open an issue on GitHub or join us at https://astro.build/chat.`);b=t[0],({html:m,attrs:p}=await b.ssr.renderToStaticMarkup.call({result:e},r,u,y,a))}}if(b&&!b.clientEntrypoint&&"@astrojs/lit"!==b.name&&a.hydrate)throw new AstroError({...NoClientEntrypoint,message:NoClientEntrypoint.message(t,a.hydrate,b.name)});if(!m&&"string"==typeof r){const t=sanitizeElementName(r),n=Object.values(y).join(""),s=renderTemplate`<${t}${internalSpreadAttributes(d)}${markHTMLString(""===n&&voidElementNames.test(t)?"/>":`>${n}</${t}>`)}`;m="";const o={write(t){t instanceof Response||(m+=chunkToString(e,t))}};await s.render(o)}if(!c)return{render(e){if(g)for(const t of g)e.write(t);l||"astro:jsx"===b?.name?e.write(m):m&&m.length>0&&e.write(markHTMLString(removeStaticAstroSlot(m,b?.ssr?.supportsAstroStaticSlot)))}};const A=shorthash(`\x3c!--${a.componentExport.value}:${a.componentUrl}--\x3e\n${m}\n${serializeProps(d,a)}`),v=await generateHydrateScript({renderer:b,result:e,astroId:A,props:d,attrs:p},a);S&&"development"===process.env.NODE_ENV&&(v.props["server-render-time"]=S);let w=[];if(m){if(Object.keys(y).length>0)for(const e of Object.keys(y)){let t=b?.ssr?.supportsAstroStaticSlot?a.hydrate?"astro-slot":"astro-static-slot":"astro-slot",r="default"===e?`<${t}>`:`<${t} name="${e}">`;m.includes(r)||w.push(e)}}else w=Object.keys(y);const E=w.length>0?w.map((e=>`<template data-astro-template${"default"!==e?`="${e}"`:""}>${y[e]}</template>`)).join(""):"";return v.children=`${m??""}${E}`,v.children&&(v.props["await-children"]="",v.children+="\x3c!--astro:end--\x3e"),{render(e){if(g)for(const t of g)e.write(t);e.write(createRenderInstruction({type:"directive",hydration:c})),"only"!==c.directive&&b?.ssr.renderHydrationScript&&e.write(createRenderInstruction({type:"renderer-hydration-script",rendererName:b.name,render:b.ssr.renderHydrationScript}));const t=renderElement("astro-island",v,!1);e.write(markHTMLString(t))}}}function sanitizeElementName(e){const t=/[&<>'"\s]+/;return t.test(e)?e.trim().split(t)[0].trim():e}async function renderFragmentComponent(e,t={}){const r=await renderSlotToString(e,t?.default);return{render(e){null!=r&&e.write(r)}}}async function renderHTMLComponent(e,t,r,n={}){const{slotInstructions:s,children:o}=await renderSlots(e,n),i=t({slots:o}),a=s?s.map((t=>chunkToString(e,t))).join(""):"";return{render(e){e.write(markHTMLString(a+i))}}}function renderAstroComponent(e,t,r,n,s={}){if(containsServerDirective(n))return renderServerIsland(e,t,n,s);const o=createAstroComponentInstance(e,t,r,n,s);return{async render(e){await o.render(e)}}}async function renderComponent(e,t,r,n,s={}){return isPromise(r)&&(r=await r.catch(o)),isFragmentComponent(r)?await renderFragmentComponent(e,s).catch(o):(n=normalizeProps(n),isHTMLComponent(r)?await renderHTMLComponent(e,r,n,s).catch(o):isAstroComponentFactory(r)?renderAstroComponent(e,t,r,n,s):await renderFrameworkComponent(e,t,r,n,s).catch(o));function o(t){if(e.cancelled)return{render(){}};throw t}}function normalizeProps(e){if(void 0!==e["class:list"]){const t=e["class:list"];delete e["class:list"],e.class=clsx(e.class,t),""===e.class&&delete e.class}return e}function renderScriptElement({props:e,children:t}){return renderElement("script",{props:e,children:t})}function renderUniqueStylesheet(e,t){return"external"===t.type?Array.from(e.styles).some((e=>e.props.href===t.src))?"":renderElement("link",{props:{rel:"stylesheet",href:t.src},children:""}):"inline"===t.type?Array.from(e.styles).some((e=>e.children.includes(t.content)))?"":renderElement("style",{props:{},children:t.content}):void 0}function spreadAttributes(e={},t,{class:r}={}){let n="";r&&(void 0!==e.class?e.class+=` ${r}`:void 0!==e["class:list"]?e["class:list"]=[e["class:list"],r]:e.class=r);for(const[t,r]of Object.entries(e))n+=addAttribute(r,t,!0);return markHTMLString(n)}"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split("").reduce(((e,t)=>(e[t.charCodeAt(0)]=t,e)),[]),"-0123456789_".split("").reduce(((e,t)=>(e[t.charCodeAt(0)]=t,e)),[]);export{Fragment as F,NOOP_MIDDLEWARE_HEADER as N,renderComponent as a,createAstro as b,createComponent as c,addAttribute as d,renderSlot as e,renderUniqueStylesheet as f,renderScriptElement as g,createHeadAndContent as h,renderHead as i,decodeKey as j,maybeRenderHead as m,renderTemplate as r,spreadAttributes as s,unescapeHTML as u};